<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关系型数据库 | Bajins</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/icons/logo.png">
    <link rel="apple-touch-icon" href="/images/icons/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script type="text/javascript" src="/assets/js/load.js"></script>
    <meta name="description" content="关系型数据库（Relational database），是指采用了关系模型来组织数据的数据库，其以行和列的形式存储数据，以便于用户理解
&gt; ，关系型数据库这一系列的行和列被称为表，一组表组成了数据库">
    <meta name="twitter:title" content="关系型数据库">
    <meta name="twitter:description" content="关系型数据库（Relational database），是指采用了关系模型来组织数据的数据库，其以行和列的形式存储数据，以便于用户理解
&gt; ，关系型数据库这一系列的行和列被称为表，一组表组成了数据库">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://bajins.com/DBS/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93.html">
    <meta property="og:type" content="article">
    <meta property="og:title" content="关系型数据库">
    <meta property="og:description" content="关系型数据库（Relational database），是指采用了关系模型来组织数据的数据库，其以行和列的形式存储数据，以便于用户理解
&gt; ，关系型数据库这一系列的行和列被称为表，一组表组成了数据库">
    <meta property="og:url" content="https://bajins.com/DBS/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93.html">
    <meta property="og:site_name" content="bajins">
    <meta itemprop="name" content="关系型数据库">
    <meta itemprop="description" content="关系型数据库（Relational database），是指采用了关系模型来组织数据的数据库，其以行和列的形式存储数据，以便于用户理解
&gt; ，关系型数据库这一系列的行和列被称为表，一组表组成了数据库">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="keywords" content="bajins,vue,vuepress,vuepress-theme,theme,主题,vuepress主题,blog
        ,vuepress-blog,java,python,shell,sql,golang,script,shell script,nginx,windows,去广告,androd,google drive
        ,one drive,idea,eclipse,git,小程序">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.cc403613.css" as="style"><link rel="preload" href="/assets/js/app.e561382c.js" as="script"><link rel="preload" href="/assets/js/2.fae7dd45.js" as="script"><link rel="preload" href="/assets/js/1.53c75ce4.js" as="script"><link rel="preload" href="/assets/js/33.b1edee9e.js" as="script"><link rel="prefetch" href="/assets/js/100.511cc7db.js"><link rel="prefetch" href="/assets/js/101.fe659ac7.js"><link rel="prefetch" href="/assets/js/102.ca7127e5.js"><link rel="prefetch" href="/assets/js/103.c8d93ff8.js"><link rel="prefetch" href="/assets/js/104.4c8eb83d.js"><link rel="prefetch" href="/assets/js/105.a8a3a788.js"><link rel="prefetch" href="/assets/js/106.b2ede7d8.js"><link rel="prefetch" href="/assets/js/107.718f7617.js"><link rel="prefetch" href="/assets/js/108.b02f2d98.js"><link rel="prefetch" href="/assets/js/109.97703c3a.js"><link rel="prefetch" href="/assets/js/110.fd923525.js"><link rel="prefetch" href="/assets/js/111.55ddf008.js"><link rel="prefetch" href="/assets/js/112.c9e0cc6f.js"><link rel="prefetch" href="/assets/js/113.739e55c8.js"><link rel="prefetch" href="/assets/js/114.9dee2393.js"><link rel="prefetch" href="/assets/js/115.53fd798a.js"><link rel="prefetch" href="/assets/js/116.eadb916e.js"><link rel="prefetch" href="/assets/js/117.c2564e89.js"><link rel="prefetch" href="/assets/js/118.9ddf46fc.js"><link rel="prefetch" href="/assets/js/119.469be7e6.js"><link rel="prefetch" href="/assets/js/12.49680888.js"><link rel="prefetch" href="/assets/js/120.e2e96df3.js"><link rel="prefetch" href="/assets/js/121.ba08e9b3.js"><link rel="prefetch" href="/assets/js/122.72394b0e.js"><link rel="prefetch" href="/assets/js/123.53032168.js"><link rel="prefetch" href="/assets/js/124.99af57b0.js"><link rel="prefetch" href="/assets/js/125.a57ecbb8.js"><link rel="prefetch" href="/assets/js/126.ead85116.js"><link rel="prefetch" href="/assets/js/13.9d98d89b.js"><link rel="prefetch" href="/assets/js/14.e42e9e58.js"><link rel="prefetch" href="/assets/js/15.1ce31920.js"><link rel="prefetch" href="/assets/js/16.873dbfde.js"><link rel="prefetch" href="/assets/js/17.84ba5cc8.js"><link rel="prefetch" href="/assets/js/18.2b3d3f41.js"><link rel="prefetch" href="/assets/js/19.e5a910a7.js"><link rel="prefetch" href="/assets/js/20.57ff2f19.js"><link rel="prefetch" href="/assets/js/21.fcbc3d10.js"><link rel="prefetch" href="/assets/js/22.3c970db2.js"><link rel="prefetch" href="/assets/js/23.da1d351f.js"><link rel="prefetch" href="/assets/js/24.b8cf1d01.js"><link rel="prefetch" href="/assets/js/25.73ccf3d8.js"><link rel="prefetch" href="/assets/js/26.ab0368bb.js"><link rel="prefetch" href="/assets/js/27.61a01b97.js"><link rel="prefetch" href="/assets/js/28.55610785.js"><link rel="prefetch" href="/assets/js/29.776bf963.js"><link rel="prefetch" href="/assets/js/3.44b1dbe5.js"><link rel="prefetch" href="/assets/js/30.ea419de1.js"><link rel="prefetch" href="/assets/js/31.80741035.js"><link rel="prefetch" href="/assets/js/32.edace051.js"><link rel="prefetch" href="/assets/js/34.2c82988e.js"><link rel="prefetch" href="/assets/js/35.5b360260.js"><link rel="prefetch" href="/assets/js/36.9ab5c6df.js"><link rel="prefetch" href="/assets/js/37.8646d8f1.js"><link rel="prefetch" href="/assets/js/38.b78c5100.js"><link rel="prefetch" href="/assets/js/39.dd6e4fe6.js"><link rel="prefetch" href="/assets/js/4.25548953.js"><link rel="prefetch" href="/assets/js/40.d6be584b.js"><link rel="prefetch" href="/assets/js/41.40b39840.js"><link rel="prefetch" href="/assets/js/42.997e3273.js"><link rel="prefetch" href="/assets/js/43.5f2d7819.js"><link rel="prefetch" href="/assets/js/44.84aa0c52.js"><link rel="prefetch" href="/assets/js/45.8e4f9bfb.js"><link rel="prefetch" href="/assets/js/46.82daba61.js"><link rel="prefetch" href="/assets/js/47.d3c57201.js"><link rel="prefetch" href="/assets/js/48.eb074f35.js"><link rel="prefetch" href="/assets/js/49.30cd29fa.js"><link rel="prefetch" href="/assets/js/5.09905ac2.js"><link rel="prefetch" href="/assets/js/50.df18ffe7.js"><link rel="prefetch" href="/assets/js/51.740f9895.js"><link rel="prefetch" href="/assets/js/52.ff4b6510.js"><link rel="prefetch" href="/assets/js/53.eabf4a79.js"><link rel="prefetch" href="/assets/js/54.830da6c0.js"><link rel="prefetch" href="/assets/js/55.eb7369b0.js"><link rel="prefetch" href="/assets/js/56.907d1d28.js"><link rel="prefetch" href="/assets/js/57.4d2c42bf.js"><link rel="prefetch" href="/assets/js/58.37cb0e89.js"><link rel="prefetch" href="/assets/js/59.6ca67e0d.js"><link rel="prefetch" href="/assets/js/6.81c5f0ad.js"><link rel="prefetch" href="/assets/js/60.e661310f.js"><link rel="prefetch" href="/assets/js/61.a634ed91.js"><link rel="prefetch" href="/assets/js/62.1db20358.js"><link rel="prefetch" href="/assets/js/63.e077a680.js"><link rel="prefetch" href="/assets/js/64.343f20df.js"><link rel="prefetch" href="/assets/js/65.db1cf5ed.js"><link rel="prefetch" href="/assets/js/66.0d58dcf7.js"><link rel="prefetch" href="/assets/js/67.25f74aa7.js"><link rel="prefetch" href="/assets/js/68.fe3f2616.js"><link rel="prefetch" href="/assets/js/69.d2a61090.js"><link rel="prefetch" href="/assets/js/7.8112c08e.js"><link rel="prefetch" href="/assets/js/70.94fc2790.js"><link rel="prefetch" href="/assets/js/71.3440e5bc.js"><link rel="prefetch" href="/assets/js/72.7fb7cf49.js"><link rel="prefetch" href="/assets/js/73.5afc99ac.js"><link rel="prefetch" href="/assets/js/74.591122bd.js"><link rel="prefetch" href="/assets/js/75.569f50cb.js"><link rel="prefetch" href="/assets/js/76.e0b037c6.js"><link rel="prefetch" href="/assets/js/77.57b76742.js"><link rel="prefetch" href="/assets/js/78.719d7c67.js"><link rel="prefetch" href="/assets/js/79.9cb93265.js"><link rel="prefetch" href="/assets/js/8.cb1a57da.js"><link rel="prefetch" href="/assets/js/80.c726f6b3.js"><link rel="prefetch" href="/assets/js/81.06a1e6fc.js"><link rel="prefetch" href="/assets/js/82.f039da3d.js"><link rel="prefetch" href="/assets/js/83.ac675491.js"><link rel="prefetch" href="/assets/js/84.b7e8643a.js"><link rel="prefetch" href="/assets/js/85.b4b033ba.js"><link rel="prefetch" href="/assets/js/86.7b075cd5.js"><link rel="prefetch" href="/assets/js/87.1d69a0f6.js"><link rel="prefetch" href="/assets/js/88.cb0c4006.js"><link rel="prefetch" href="/assets/js/89.828b242b.js"><link rel="prefetch" href="/assets/js/90.e90a50fb.js"><link rel="prefetch" href="/assets/js/91.5eeaaf8c.js"><link rel="prefetch" href="/assets/js/92.069ffb77.js"><link rel="prefetch" href="/assets/js/93.cfaff22b.js"><link rel="prefetch" href="/assets/js/94.d8b7c8c4.js"><link rel="prefetch" href="/assets/js/95.01c19d00.js"><link rel="prefetch" href="/assets/js/96.925a30df.js"><link rel="prefetch" href="/assets/js/97.c5ebb249.js"><link rel="prefetch" href="/assets/js/98.b18a58cc.js"><link rel="prefetch" href="/assets/js/99.9008786a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b07fd196.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.1303ef67.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cc403613.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icons/logo.png" alt="Bajins" class="logo"> <span class="site-name can-hide">Bajins</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/DBS/" class="nav-link router-link-active">
  DBS
</a></div><div class="nav-item"><a href="/Go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/IDE/" class="nav-link">
  IDE
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/Other/" class="nav-link">
  Other
</a></div><div class="nav-item"><a href="/PL/" class="nav-link">
  PL
</a></div><div class="nav-item"><a href="/Python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/Shell/" class="nav-link">
  Shell
</a></div><div class="nav-item"><a href="/System/" class="nav-link">
  System
</a></div><div class="nav-item"><a href="/Web/" class="nav-link">
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="快捷链接" class="dropdown-title"><span class="title">快捷链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="快捷链接" class="mobile-dropdown-title"><span class="title">快捷链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          外部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tool.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  获取XShell
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tr.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OCR图片识别
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://g.bajins.eu.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub反代
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://g.woetu.eu.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub反代
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          内部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files.html" class="nav-link">
  文件
</a></li><li class="dropdown-subitem"><a href="/Other/Bookmarks.html" class="nav-link">
  书签锦集
</a></li><li class="dropdown-subitem"><a href="/System/Windows软件.html" class="nav-link">
  Windows软件
</a></li><li class="dropdown-subitem"><a href="/Other/Markdown.html#工具" class="nav-link">
  Markdown工具
</a></li></ul></li></ul></div></div> <a href="https://github.com/bajins/notes-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/DBS/" class="nav-link router-link-active">
  DBS
</a></div><div class="nav-item"><a href="/Go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/IDE/" class="nav-link">
  IDE
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/Other/" class="nav-link">
  Other
</a></div><div class="nav-item"><a href="/PL/" class="nav-link">
  PL
</a></div><div class="nav-item"><a href="/Python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/Shell/" class="nav-link">
  Shell
</a></div><div class="nav-item"><a href="/System/" class="nav-link">
  System
</a></div><div class="nav-item"><a href="/Web/" class="nav-link">
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="快捷链接" class="dropdown-title"><span class="title">快捷链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="快捷链接" class="mobile-dropdown-title"><span class="title">快捷链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          外部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tool.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  获取XShell
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tr.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OCR图片识别
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://g.bajins.eu.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub反代
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://g.woetu.eu.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub反代
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          内部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files.html" class="nav-link">
  文件
</a></li><li class="dropdown-subitem"><a href="/Other/Bookmarks.html" class="nav-link">
  书签锦集
</a></li><li class="dropdown-subitem"><a href="/System/Windows软件.html" class="nav-link">
  Windows软件
</a></li><li class="dropdown-subitem"><a href="/Other/Markdown.html#工具" class="nav-link">
  Markdown工具
</a></li></ul></li></ul></div></div> <a href="https://github.com/bajins/notes-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DBS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DBS/" aria-current="page" class="sidebar-link">DBS</a></li><li><a href="/DBS/MySQL.html" class="sidebar-link">MySQL</a></li><li><a href="/DBS/MySQL事件.html" class="sidebar-link">MySQL事件</a></li><li><a href="/DBS/MySQL备份恢复.html" class="sidebar-link">MySQL备份恢复</a></li><li><a href="/DBS/MySQL存储过程.html" class="sidebar-link">MySQL存储过程</a></li><li><a href="/DBS/MySQL安装配置.html" class="sidebar-link">MySQL安装配置</a></li><li><a href="/DBS/mysql-udf安装.html" class="sidebar-link">mysql-udf安装</a></li><li><a href="/DBS/关系型SQL标准.html" class="sidebar-link">关系型SQL标准</a></li><li><a href="/DBS/关系型数据库.html" class="active sidebar-link">关系型数据库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DBS/关系型数据库.html#flag" class="sidebar-link">Flag</a></li><li class="sidebar-sub-header"><a href="/DBS/关系型数据库.html#事务" class="sidebar-link">事务</a></li><li class="sidebar-sub-header"><a href="/DBS/关系型数据库.html#数据库设计" class="sidebar-link">数据库设计</a></li><li class="sidebar-sub-header"><a href="/DBS/关系型数据库.html#oracle" class="sidebar-link">ORACLE</a></li><li class="sidebar-sub-header"><a href="/DBS/关系型数据库.html#postgresql" class="sidebar-link">PostgreSQL</a></li><li class="sidebar-sub-header"><a href="/DBS/关系型数据库.html#sqlite3" class="sidebar-link">SQLite3</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="关系型数据库"><a href="#关系型数据库" class="header-anchor">#</a> 关系型数据库</h1> <p></p><div class="table-of-contents"><ul><li><a href="#flag">Flag</a></li><li><a href="#事务">事务</a></li><li><a href="#数据库设计">数据库设计</a></li><li><a href="#oracle">ORACLE</a></li><li><a href="#postgresql">PostgreSQL</a></li><li><a href="#sqlite3">SQLite3</a></li></ul></div><p></p> <h2 id="flag"><a href="#flag" class="header-anchor">#</a> Flag</h2> <blockquote><p>关系型数据库（Relational database），是指采用了关系模型来组织数据的数据库，其以行和列的形式存储数据，以便于用户理解
，关系型数据库这一系列的行和列被称为表，一组表组成了数据库</p></blockquote> <ul><li><a href="https://github.com/opengauss-mirror" target="_blank" rel="noopener noreferrer">https://github.com/opengauss-mirror<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/MariaDB" target="_blank" rel="noopener noreferrer">https://github.com/MariaDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><a href="https://github.com/mariadb-corporation" target="_blank" rel="noopener noreferrer">https://github.com/mariadb-corporation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><a href="https://github.com/percona/percona-server" target="_blank" rel="noopener noreferrer">https://github.com/percona/percona-server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>SQL代理 <a href="https://github.com/sysown/proxysql" target="_blank" rel="noopener noreferrer">https://github.com/sysown/proxysql<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>内存关系数据库 <a href="https://github.com/VoltDB/voltdb" target="_blank" rel="noopener noreferrer">https://github.com/VoltDB/voltdb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/memsql" target="_blank" rel="noopener noreferrer">https://github.com/memsql<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><a href="https://www.singlestore.com" target="_blank" rel="noopener noreferrer">https://www.singlestore.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><a href="https://github.com/cmu-db/noisepage" target="_blank" rel="noopener noreferrer">https://github.com/cmu-db/noisepage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/eclipse-store/store" target="_blank" rel="noopener noreferrer">https://github.com/eclipse-store/store<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/h2database/h2database" target="_blank" rel="noopener noreferrer">https://github.com/h2database/h2database<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://sourceforge.net/projects/hsqldb" target="_blank" rel="noopener noreferrer">https://sourceforge.net/projects/hsqldb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><a href="http://hsqldb.org" target="_blank" rel="noopener noreferrer">http://hsqldb.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><a href="https://github.com/FirebirdSQL/firebird" target="_blank" rel="noopener noreferrer">https://github.com/FirebirdSQL/firebird<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/duckdb/duckdb" target="_blank" rel="noopener noreferrer">https://github.com/duckdb/duckdb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/babelfish-for-postgresql" target="_blank" rel="noopener noreferrer">https://github.com/babelfish-for-postgresql<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/greenplum-db" target="_blank" rel="noopener noreferrer">https://github.com/greenplum-db<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong>递归</strong></p> <blockquote><p>Common Table Expression(公共表表达式)：在CTE中可以包括对自身的引用，因此这种表达式也被称为递归CTE</p></blockquote> <ul><li><a href="https://www.cnblogs.com/sheng-jie/p/6347835.html" target="_blank" rel="noopener noreferrer">SQL递归查询知多少<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/FatalFlower/p/16464039.html" target="_blank" rel="noopener noreferrer">SQL 的递归查询<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- ORACLE</span>
查询语句 <span class="token keyword">start</span> <span class="token keyword">with</span> 起始条件 <span class="token keyword">connect</span> <span class="token keyword">by</span> prior 递归条件
<span class="token comment">-- 其他数据库</span>
<span class="token keyword">with</span> recursive cte <span class="token keyword">as</span><span class="token punctuation">(</span>
 <span class="token keyword">select</span> user_id<span class="token punctuation">,</span>manager_id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>name <span class="token keyword">as</span> manager_name <span class="token keyword">from</span> employee <span class="token keyword">where</span> manager_id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>
 <span class="token keyword">union</span> <span class="token keyword">all</span>
 <span class="token keyword">select</span> c<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span>c<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name<span class="token punctuation">,</span>p<span class="token punctuation">.</span>name <span class="token keyword">as</span> manager_name <span class="token keyword">from</span> cte p<span class="token punctuation">,</span> employee c <span class="token keyword">on</span> p<span class="token punctuation">.</span>user_id<span class="token operator">=</span>c<span class="token punctuation">.</span>manager_id
<span class="token punctuation">)</span>
<span class="token keyword">select</span> user_id<span class="token punctuation">,</span>manager_id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>manager_name <span class="token keyword">from</span> cte
</code></pre></div><p><strong>索引类型</strong></p> <table><thead><tr><th>索引类型</th> <th>说明</th></tr></thead> <tbody><tr><td>B-TREE</td> <td>B树索引</td></tr> <tr><td>HASH</td> <td>哈希索引</td></tr> <tr><td>GENERALIZED SEARCH TREE</td> <td>GIST平衡树结构索引</td></tr> <tr><td>GENERALIZED INVERTED</td> <td>GIN倒排索引索引</td></tr> <tr><td>SPATIAL</td> <td>空间索引</td></tr> <tr><td>FULL TEXT</td> <td>全文索引</td></tr> <tr><td>BITMAP</td> <td>位图索引</td></tr> <tr><td>INVERTED</td> <td>反向索引</td></tr></tbody></table> <p><strong>通用日期时间</strong></p> <ul><li><a href="https://blog.csdn.net/yaoxin521123/category_11551095.html" target="_blank" rel="noopener noreferrer">SQL 函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><a href="https://www.zhihu.com/people/yaoxin521123" target="_blank" rel="noopener noreferrer">姚鑫 - 知乎<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <blockquote><p>获得当前日期+时间（date+time）函数</p></blockquote> <ul><li><code>localtime</code></li> <li><code>localtimestamp</code></li> <li><code>current_date</code></li> <li><code>CURRENT_TIME</code></li> <li><code>current_timestamp</code></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CURRENT_TIMESTAMP</span> { <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token keyword">HOUR</span><span class="token operator">|</span><span class="token keyword">MONTH</span><span class="token operator">|</span>WEEK<span class="token operator">|</span><span class="token keyword">DAY</span><span class="token operator">|</span><span class="token keyword">MINUTE</span><span class="token operator">|</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> }
</code></pre></div><ul><li><code>INTERVAL</code>时间单位</li></ul> <table><thead><tr><th>时间单位</th> <th>简写</th> <th>说明</th></tr></thead> <tbody><tr><td>MILLENNIUM</td> <td>ml</td> <td>1000年</td></tr> <tr><td>CENTURY</td> <td>cen</td> <td>100年</td></tr> <tr><td>DECADE</td> <td>dec</td> <td>10年</td></tr> <tr><td>YEAR</td> <td>y/yr</td> <td>年</td></tr> <tr><td>QUARTER</td> <td></td> <td>季度</td></tr> <tr><td>MONTH</td> <td>mon</td> <td>月</td></tr> <tr><td>WEEK</td> <td>w</td> <td>周</td></tr> <tr><td>DAY</td> <td>d</td> <td>天</td></tr> <tr><td>HOUR</td> <td>h/hr</td> <td>时</td></tr> <tr><td>MINUTE</td> <td>m/min</td> <td>分</td></tr> <tr><td>SECOND</td> <td>s/sec</td> <td>秒</td></tr> <tr><td>MILLISECOND</td> <td>ms</td> <td>毫秒</td></tr> <tr><td>MICROSECOND</td> <td>us</td> <td>微秒</td></tr> <tr><td>NANOSECOND</td> <td>ns</td> <td>纳秒</td></tr> <tr><td>YEAR_MONTH</td> <td>yr_mon</td> <td>年:月</td></tr> <tr><td>DAY_HOUR</td> <td>d_hr</td> <td>日:时</td></tr> <tr><td>DAY_MINUTE</td> <td>d_min</td> <td>日:分</td></tr> <tr><td>DAY_SECOND</td> <td>d_sec</td> <td>日:秒</td></tr> <tr><td>HOUR_MINUTE</td> <td>hr_min</td> <td>时:分</td></tr> <tr><td>HOUR_SECOND</td> <td>hr_sec</td> <td>时:秒</td></tr> <tr><td>MINUTE_SECOND</td> <td>min_sec</td> <td>分:秒</td></tr></tbody></table> <ul><li>TRUNC(NUMBER)表示截断数字，TRUNC(date)表示截断日期</li> <li>date_trunc 开始的日期时间</li> <li>date_part 从时间戳中提取 年月日时分秒周</li> <li>to_date 转日期</li> <li>TO_TIMESTAMP 转时间戳</li></ul> <p><strong>主流数据库数据类型对应关系</strong></p> <ul><li><a href="https://www.postgresql.org/docs/current/datatype.html" target="_blank" rel="noopener noreferrer">https://www.postgresql.org/docs/current/datatype.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dev.mysql.com/doc/refman/8.0/en/data-types.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/8.0/en/data-types.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/Data-Types.html" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/Data-Types.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://learn.microsoft.com/zh-cn/sql/t-sql/data-types" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/sql/t-sql/data-types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.sqlite.org/datatype3.html" target="_blank" rel="noopener noreferrer">https://www.sqlite.org/datatype3.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <table><thead><tr><th>数据类型分类</th> <th>SQL Server</th> <th>MySQL</th> <th>Oracle</th> <th>PostgreSQL</th> <th>SQLite</th></tr></thead> <tbody><tr><td>布尔值</td> <td>bit</td> <td>bit</td> <td>SMALLINT</td> <td>bit</td> <td></td></tr> <tr><td>布尔值</td> <td></td> <td></td> <td></td> <td>boolean/bool</td> <td></td></tr> <tr><td>二进制</td> <td>binary</td> <td>binary</td> <td>BLOB</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>double</td> <td>double</td> <td>BINARY_DOUBLE</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>float</td> <td>float</td> <td>BINARY_FLOAT</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>image</td> <td>blob</td> <td>BLOB</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>sql_variant</td> <td>longblob</td> <td>BLOB</td> <td>bytea</td> <td></td></tr> <tr><td>二进制</td> <td>image</td> <td>longblob</td> <td>BLOB</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>image</td> <td>longblob</td> <td>LONGRAW</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>image</td> <td>mediumblob</td> <td>BLOB</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>image</td> <td>longblob</td> <td>RAW</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>uniqueidentifier</td> <td>VARCHAR</td> <td>ROWID</td> <td></td> <td></td></tr> <tr><td>二进制</td> <td>sql_variant</td> <td>longblob</td> <td>BLOB</td> <td></td> <td></td></tr> <tr><td>二进制（外部）</td> <td></td> <td></td> <td>BFILE</td> <td></td> <td></td></tr> <tr><td>日期</td> <td>date</td> <td>date</td> <td>DATE</td> <td>date</td> <td>date</td></tr> <tr><td>日期</td> <td>datetime</td> <td>datetime</td> <td>DATE</td> <td></td> <td></td></tr> <tr><td>日期</td> <td>datetime2</td> <td>datetime</td> <td>DATE</td> <td></td> <td></td></tr> <tr><td>日期</td> <td>datetimeoffset</td> <td>datetime</td> <td>DATE</td> <td></td> <td></td></tr> <tr><td>日期</td> <td>smalldatetime</td> <td>datetime</td> <td>DATE</td> <td></td> <td></td></tr> <tr><td>日期</td> <td>time</td> <td>time</td> <td>DATE</td> <td>time</td> <td>time</td></tr> <tr><td>日期</td> <td>timestamp</td> <td>timestamp</td> <td>TIMESTAMP</td> <td>timestamp</td> <td>timestamp</td></tr> <tr><td>日期（带时区）</td> <td></td> <td></td> <td>TIMESTAMP WITH   LOCAL TIME ZONE</td> <td>timestamp with time zone/timestamptz</td> <td></td></tr> <tr><td>日期（带时区）</td> <td></td> <td></td> <td></td> <td>time with time zone/timetz</td> <td></td></tr> <tr><td>数字</td> <td>bigint</td> <td>bigint</td> <td>INTEGER</td> <td>bigint/int8</td> <td></td></tr> <tr><td>数字</td> <td>decimal</td> <td>decimal</td> <td>DECIMAL</td> <td>numeric/decimal</td> <td>decimal</td></tr> <tr><td>数字</td> <td>double</td> <td>double</td> <td>FLOAT</td> <td>double precision/float8</td> <td>double</td></tr> <tr><td>数字</td> <td>float</td> <td>float</td> <td>FLOAT</td> <td></td> <td>float</td></tr> <tr><td>数字</td> <td>int</td> <td>int</td> <td>INTEGER</td> <td>integer/int/int4</td> <td>interger</td></tr> <tr><td>数字</td> <td>int</td> <td>mediumint</td> <td>INTEGER</td> <td></td> <td></td></tr> <tr><td>数字</td> <td>money</td> <td>decimal</td> <td>DECIMAL</td> <td>money</td> <td></td></tr> <tr><td>数字</td> <td>numeric</td> <td>numeric</td> <td>NUMBER</td> <td></td> <td></td></tr> <tr><td>数字</td> <td>REAL</td> <td>REAL</td> <td>REAL</td> <td>real/float4</td> <td></td></tr> <tr><td>数字</td> <td>smallint</td> <td>smallint</td> <td>SMALLINT</td> <td>smallint/int2</td> <td>smallint</td></tr> <tr><td>数字</td> <td>smallmoney</td> <td>numeric</td> <td>NUMERIC</td> <td></td> <td></td></tr> <tr><td>数字</td> <td>tinyint</td> <td>tinyint</td> <td>SMALLINT</td> <td></td> <td></td></tr> <tr><td>数字</td> <td>year</td> <td>year</td> <td>NUMBER</td> <td></td> <td></td></tr> <tr><td>字符串</td> <td>char</td> <td>char</td> <td>CHAR</td> <td>character/char</td> <td>char</td></tr> <tr><td>字符串</td> <td>varchar</td> <td>varchar</td> <td>VARCHAR2</td> <td>character varying/varchar</td> <td>varchar/vargraphic</td></tr> <tr><td>字符串</td> <td>varchar</td> <td>enum</td> <td>VARCHAR2</td> <td></td> <td></td></tr> <tr><td>字符串</td> <td>nchar</td> <td>varchar</td> <td>NCHAR</td> <td></td> <td>graphic</td></tr> <tr><td>字符串</td> <td>nvarchar</td> <td>varchar</td> <td>NVARCHAR2</td> <td></td> <td></td></tr> <tr><td>字符串</td> <td>nvarchar(max)</td> <td>varchar</td> <td>NVARCHAR2</td> <td></td> <td></td></tr> <tr><td>字符串</td> <td>nvarchar</td> <td>varchar</td> <td>NVARCHAR2</td> <td></td> <td></td></tr> <tr><td>字符串</td> <td>VARCHAR</td> <td>set</td> <td>VARCHAR2</td> <td></td> <td></td></tr> <tr><td>字符串</td> <td>uniqueidentifier</td> <td>VARCHAR</td> <td>ROWID</td> <td></td> <td></td></tr> <tr><td>字符串</td> <td>uniqueidentifier</td> <td>VARCHAR</td> <td>UROWID</td> <td></td> <td></td></tr> <tr><td>字符串</td> <td>varchar(max)</td> <td>varchar</td> <td>VARCHAR2</td> <td></td> <td></td></tr> <tr><td>字符串（大）</td> <td>text</td> <td>text</td> <td>CLOB</td> <td>text</td> <td></td></tr> <tr><td>字符串（大）</td> <td>text</td> <td>longtext</td> <td>CLOB</td> <td>text</td> <td></td></tr> <tr><td>字符串（大）</td> <td>ntext</td> <td>text</td> <td>NCLOB</td> <td>text</td> <td></td></tr> <tr><td>字符串（大）</td> <td>text</td> <td>text</td> <td>CLOB</td> <td>text</td> <td></td></tr> <tr><td>字符串（大）</td> <td>TEXT</td> <td>tinytext</td> <td>CLOB</td> <td>text</td> <td></td></tr> <tr><td>字符串（大）</td> <td>xml</td> <td>TEXT</td> <td>CLOB</td> <td>xml</td> <td></td></tr> <tr><td>字符串（大）</td> <td>text</td> <td>text</td> <td>LONG</td> <td></td> <td></td></tr> <tr><td>字符串（大）</td> <td>text</td> <td>mediumtext</td> <td>CLOB</td> <td></td> <td></td></tr> <tr><td>字符串（大）</td> <td>ntext</td> <td>text</td> <td>CLOB</td> <td></td> <td></td></tr> <tr><td>字符串（大）</td> <td>text</td> <td>JSON</td> <td>JSON</td> <td>json</td> <td></td></tr> <tr><td>字符串（二进制）</td> <td>varbinary</td> <td>tinyblob</td> <td>BLOB</td> <td></td> <td></td></tr> <tr><td>字符串（二进制）</td> <td>varbinary</td> <td>varbinary</td> <td>BLOB</td> <td></td> <td></td></tr> <tr><td>字符串（二进制）</td> <td>varbinary(max)</td> <td>varbinary</td> <td>BLOB</td> <td></td> <td></td></tr> <tr><td>字符串（二进制）</td> <td>varbinary</td> <td>varbinary</td> <td>BLOB</td> <td>jsonb</td> <td></td></tr></tbody></table> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <ul><li>脏数据：未提交的数据</li> <li>不可重复读（Non-Repeatable Reads）：一个事务先后读取同一条记录，而事务在两次读取之间该数据被其它事务所修改，则两次读取的数据不同</li> <li>幻读（Phantom Reads）：一个事务按相同的查询条件重新读取以前检索过的数据，却发现其他事务插入了满足其查询条件的新数据</li></ul> <ul><li><a href="https://www.cnblogs.com/jerryliuxin/p/15441437.html" target="_blank" rel="noopener noreferrer">事务概念<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/yubaolee/p/10398633.html" target="_blank" rel="noopener noreferrer">事务隔离级别、脏读、不可重复读、幻读<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_45730866/article/details/123654710" target="_blank" rel="noopener noreferrer">事务的四大特性<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong>遵循<a href="https://www.jianshu.com/p/fc8a654f2205" target="_blank" rel="noopener noreferrer">ACID<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>事务规则</strong></p> <p>1、A (Atomicity) 原子性</p> <blockquote><p>一个事务要么全部提交成功，要么全部失败回滚，不能只执行其中的一部分操作，只要有一个操作失败，整个事务就失败，需要回滚。
例如：从A账户转10元至B账户，分为两个步骤：1.从A账户取10元；2.存入10元至B账户。这两步要么一起完成，要么一起不完成，当只完成第一步，第二步失败的情况下
，钱就会回滚到A账户中去，否则的话，钱就会莫名其妙少了10元。</p></blockquote> <p>2、C (Consistency) 一致性</p> <blockquote><p>数据库要一直处于一致的状态，事务的运行不会改变数据库原本的一致性约束。
例如：现有完整性约束a+b=10，如果一个事务改变了a，那么必须得改变b，使得事务结束后依然满足a+b=10，否则事务失败。</p></blockquote> <p>3、I (Isolation) 独立性/隔离性</p> <blockquote><p>并发的事务之间不会互相影响，如果一个事务要访问的数据正在被另外一个事务修改，只要另外一个事务未提交，它所访问的数据就不受未提交事务的影响。
例如：现在从A账户转10元至B账户，在这个交易还未完成的情况下，如果此时B查询自己的账户，是看不到新增加的10的。</p></blockquote> <p>4、D (Durability) 持久性</p> <blockquote><p>一旦事务提交后，它所做的修改将会永久的保存在数据库上，即使出现宕机也不会丢失</p></blockquote> <p><strong>运行模式</strong></p> <ol><li>自动提交事务：默认事务管理模式。如果一个语句成功地完成，则提交该语句；如果遇到错误，则回滚该语句。</li> <li>显式事务：以BEGIN TRANSACTION显式开始，以COMMIT或ROLLBACK显式结束。</li> <li>隐性事务：当连接以此模式进行操作时，sql将在提交或回滚当前事务后自动启动新事务。无须描述事务的开始，只需提交或回滚每个事务。它生成连续的事务链。</li></ol> <h2 id="数据库设计"><a href="#数据库设计" class="header-anchor">#</a> 数据库设计</h2> <p><strong>范式：Normal Format</strong></p> <blockquote><p>符合某一种级别的关系模式的集合，表示一个关系内部各属性之间的联系的合理化程度。一个数据库表之间的所有字段之间的联系的合理性。</p></blockquote> <ul><li>范式是离散数学里的概念</li> <li>范式目标是在满足组织和存储的前提下使数据结构冗余最小化</li> <li>范式级别越高，表的级别就越标准</li></ul> <ul><li>第一范式：1NF，确保表中每一列数据的原子性，不可再分！</li> <li>第二范式：2NF，在满足第一范式的基础上，确保列数据要跟主键关联，不能出现部分依赖。</li> <li>第三范式：3NF，再满足第二范式的基础上，保证每一列数据都要跟主键直接关联，不能出现传递依赖。</li> <li>BCNF范式,4NF,5NF</li> <li>反范式：用空间换时间，通过适当的数据冗余提高查询效率，但冗余数据会牺牲数据一致性</li></ul> <ul><li><a href="https://zhuanlan.zhihu.com/p/353493253" target="_blank" rel="noopener noreferrer">数据库设计-表结构的设计范式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/jingzh/p/15270698.html" target="_blank" rel="noopener noreferrer">数据库设计三大范式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ul><li><a href="https://bbs.huaweicloud.com/blogs/286564" target="_blank" rel="noopener noreferrer">数据库分库分表Java实战经验总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/8bfe4ed00f88" target="_blank" rel="noopener noreferrer">数据库分区<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/chezong/article/details/123322973" target="_blank" rel="noopener noreferrer">数据库分区、分表、分库、分片<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="oracle"><a href="#oracle" class="header-anchor">#</a> ORACLE</h2> <ul><li><a href="https://blog.csdn.net/qq_34745941/article/details/106897099" target="_blank" rel="noopener noreferrer">Oracle with as + /<em>+ materialize</em>/ 优化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/beloved-bq/p/12561512.html" target="_blank" rel="noopener noreferrer">Oracle两种临时表的创建及使用方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.oracle.com/en/database/oracle/oracle-database/21/lnoci/preface.html" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/en/database/oracle/oracle-database/21/lnoci/preface.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>空字符串''同等NULL，字符串与数字类型会自动转换</p></blockquote> <blockquote><p>Oracle Call Interface（OCI）是Oracle提供的一组C语言API，用于开发Oracle数据库应用程序。
OCI提供了一种直接访问Oracle数据库的方式，使开发人员可以编写高效且可扩展的应用程序</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 创建会话级临时表来存储原数据，并删除表数据</span>
<span class="token keyword">CREATE</span> <span class="token keyword">GLOBAL</span> <span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLE</span> TEST_BAK <span class="token keyword">AS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> TEST<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查看临时表数据</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> TEST_BAK<span class="token punctuation">;</span>

<span class="token comment">-- Oracle中类似于PostgreSQL的unnest</span>
<span class="token comment">-- https://docs.oracle.com/en/database/oracle/oracle-database/23/addci/extensibility-constants-types-and-mappings.html</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>odcinumberlist<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>odcivarchar2list<span class="token punctuation">(</span><span class="token string">'3a'</span><span class="token punctuation">,</span><span class="token string">'4b'</span><span class="token punctuation">,</span><span class="token string">'3d'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">-- 常量子查询</span>
字段 <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">10000</span> <span class="token keyword">FROM</span> dual <span class="token keyword">UNION</span> <span class="token keyword">ALL</span> <span class="token keyword">SELECT</span> <span class="token number">20000</span> <span class="token keyword">FROM</span> dual<span class="token punctuation">)</span>

<span class="token comment">-- 清空数据 delete是dml操作；truncate是ddl操作，ddl隐式提交不能回滚，会回收表空间</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> TEST<span class="token punctuation">;</span>
<span class="token comment">-- 将目标字段数据清空</span>
<span class="token comment">--UPDATE TEST SET MEASURED = NULL;</span>

<span class="token comment">-- 修改表字段</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TEST <span class="token keyword">MODIFY</span> MEASURED NUMBER<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 还原表结构</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> TEST <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> TEST_BAK<span class="token punctuation">;</span>

<span class="token comment">-- 删除临时表</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> TEST_BAK<span class="token punctuation">;</span>


<span class="token comment">-- 替代LISTAGG拼接超4000字符长度</span>
<span class="token keyword">SELECT</span>
REGEXP_REPLACE<span class="token punctuation">(</span>RTRIM<span class="token punctuation">(</span>XMLSERIALIZE<span class="token punctuation">(</span>CONTENT XMLAGG<span class="token punctuation">(</span>XMLELEMENT<span class="token punctuation">(</span>E<span class="token punctuation">,</span>colname<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span>EXTRACT<span class="token punctuation">(</span><span class="token string">'//text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> CLOB<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'(,)+'</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span> a<span class="token punctuation">,</span>
REGEXP_REPLACE<span class="token punctuation">(</span>RTRIM<span class="token punctuation">(</span>XMLAGG<span class="token punctuation">(</span>XMLELEMENT<span class="token punctuation">(</span>E<span class="token punctuation">,</span>colname<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span>EXTRACT<span class="token punctuation">(</span><span class="token string">'//text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getclobval<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'(,)+'</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span> b<span class="token punctuation">,</span>
REGEXP_REPLACE<span class="token punctuation">(</span>RTRIM<span class="token punctuation">(</span>REGEXP_REPLACE<span class="token punctuation">(</span>XMLSERIALIZE<span class="token punctuation">(</span>CONTENT XMLAGG<span class="token punctuation">(</span>XMLELEMENT<span class="token punctuation">(</span>e<span class="token punctuation">,</span> colname <span class="token operator">||</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> CLOB<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'&lt;E&gt;|&lt;/E&gt;'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'(,)+'</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span> c
<span class="token keyword">FROM</span> table_name
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> grouping_column<span class="token punctuation">;</span>
</code></pre></div><p><strong>系统表</strong></p> <ul><li><code>USER_TABLES</code> 当前用户拥有的表：<code>TABLE_NAME</code>,<code>TABLESPACE_NAME</code>,<code>LAST_ANALYZED</code></li> <li><code>DBA_TABLES</code> 包括系统表：多了<code>OWER</code>列</li> <li><code>ALL_TABLES</code> 所有用户的表：多了<code>OWER</code>列</li> <li><code>ALL_OBJECTS</code> 当前用户有访问权限的所有对象：<code>OWER</code>,<code>OBJECT_NAME</code>,<code>SUBOBJECT_NAME</code>,<code>OBJECT_ID</code>,<code>CREATED</code>,<code>LAST_DDL_TIME</code>,<code>TIMESTAMP</code>,<code>STATUS</code></li> <li><code>USER_TAB_COLUMNS</code> 当前用户拥有的表字段</li> <li><code>ALL_TAB_COLUMNS</code></li> <li><code>DBA_TAB_COLUMNS</code></li> <li><code>USER_TAB_COMMENTS</code> 当前用户拥有的表注释 ：<code>TABLE_NAME</code>,<code>TABLE_TYPE</code>,<code>COMMENTS</code></li> <li><code>DBA_TAB_COMMENTS</code> ：多了<code>OWER</code>列</li> <li><code>ALL_TAB_COMMENTS</code> ：多了<code>OWER</code>列</li> <li><code>USER_COL_COMMENTS</code> 当前用户拥有的表字段注释 ： <code>TABLE_NAME</code>,<code>COLUMN_NAME</code>,<code>COMMENTS</code></li> <li><code>DBA_COL_COMMENTS</code> ：多了<code>OWER</code>列</li> <li><code>ALL_COL_COMMENTS</code> ：多了<code>OWER</code>列</li></ul> <blockquote><p><code>SELECT * FROM USER_TAB_COMMENTS WHERE COMMENTS LIKE '%摘要%'</code></p></blockquote> <p><strong>分组获取最新一条数据（查询各组最新的一条记录）</strong></p> <ul><li>over partition by 分析函数（开窗函数）</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> 分组字段名 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 排序字段名 <span class="token keyword">DESC</span><span class="token punctuation">)</span> rn<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> test1 t
    <span class="token punctuation">)</span> <span class="token keyword">WHERE</span> rn <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> test1 t <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 分组字段名 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 排序字段名 <span class="token keyword">DESC</span> <span class="token keyword">FETCH</span> <span class="token keyword">FIRST</span> <span class="token number">1</span> <span class="token keyword">ROWS</span> ONLY<span class="token punctuation">;</span>


<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> eb_vipcode<span class="token punctuation">,</span>eb_time<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>eb_time<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> eb_vipcode<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;atime&quot;</span> <span class="token keyword">from</span> eb_daskexpdateinfo
    <span class="token punctuation">)</span> x <span class="token keyword">where</span> eb_time <span class="token operator">=</span> <span class="token string">&quot;atime&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> ID_<span class="token punctuation">,</span>COMPANY_NAME<span class="token punctuation">,</span>USAGE_RATE<span class="token punctuation">,</span>CREATE_TIME
    <span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>CREATE_TIME<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> COMPANY_NAME<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;atime&quot;</span> <span class="token keyword">from</span> SPEC_RATE_ORIGIN
    <span class="token punctuation">)</span> x <span class="token keyword">where</span> CREATE_TIME <span class="token operator">=</span> <span class="token string">&quot;atime&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>group by</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> eb_vipcode<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>eb_time<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;atime&quot;</span> <span class="token keyword">FROM</span> eb_daskexpdateinfo <span class="token keyword">group</span> <span class="token keyword">by</span> eb_vipcode
</code></pre></div><ul><li>inner join</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> A<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> SPEC_RATE_ORIGIN A <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> COMPANY_NAME<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>CREATE_TIME<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;atime&quot;</span> <span class="token keyword">FROM</span> SPEC_RATE_ORIGIN <span class="token keyword">group</span> <span class="token keyword">by</span> COMPANY_NAME
    <span class="token punctuation">)</span> B <span class="token keyword">ON</span> A<span class="token punctuation">.</span>COMPANY_NAME <span class="token operator">=</span> B<span class="token punctuation">.</span>COMPANY_NAME <span class="token operator">AND</span> A<span class="token punctuation">.</span>CREATE_TIME <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token string">&quot;atime&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>一次执行多条SQL</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">ALL</span>
 <span class="token keyword">INTO</span> a表<span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>各个值<span class="token number">1</span><span class="token punctuation">)</span>
 <span class="token keyword">INTO</span> a表<span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>其它值<span class="token number">2</span><span class="token punctuation">)</span>
 <span class="token keyword">INTO</span> a表<span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>其它值<span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
</code></pre></div><ul><li>使用<code>begin…end;</code></li></ul> <ul><li><a href="https://www.cnblogs.com/teamleader/archive/2007/05/31/765943.html" target="_blank" rel="noopener noreferrer">如何在Oracle中一次执行多条sql语句<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">begin</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_name <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>express<span class="token punctuation">,</span>express<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_name <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>express<span class="token punctuation">,</span>express<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_name <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>express<span class="token punctuation">,</span>express<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_name <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>express<span class="token punctuation">,</span>express<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>插入或更新 upsert</strong></p> <ul><li><a href="https://www.jianshu.com/p/602ba0b8395b" target="_blank" rel="noopener noreferrer">SQL语句 存在就更新不存在就插入<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_40374341/article/details/109239544" target="_blank" rel="noopener noreferrer">merge into 的用法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MERGE</span> <span class="token keyword">INTO</span> table_name alias1   
<span class="token keyword">USING</span> <span class="token punctuation">(</span><span class="token keyword">table</span><span class="token operator">|</span><span class="token keyword">view</span><span class="token operator">|</span>sub_query<span class="token punctuation">)</span> alias2  
<span class="token keyword">ON</span> <span class="token punctuation">(</span><span class="token keyword">join</span> condition<span class="token punctuation">)</span>   
<span class="token keyword">WHEN</span> <span class="token keyword">MATCHED</span> <span class="token keyword">THEN</span>   
    <span class="token keyword">UPDATE</span> table_name <span class="token keyword">SET</span> col1 <span class="token operator">=</span> col_val1
<span class="token keyword">WHEN</span> <span class="token operator">NOT</span> <span class="token keyword">MATCHED</span> <span class="token keyword">THEN</span>   
    <span class="token keyword">INSERT</span> <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>column_values<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>死锁</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询死锁会话</span>
<span class="token keyword">SELECT</span> l<span class="token punctuation">.</span>session_id sid<span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token keyword">serial</span><span class="token comment">#, l.locked_mode, l.oracle_username, l.os_user_name</span>
<span class="token punctuation">,</span> s<span class="token punctuation">.</span>machine<span class="token punctuation">,</span> s<span class="token punctuation">.</span>terminal<span class="token punctuation">,</span> o<span class="token punctuation">.</span>object_name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>logon_time<span class="token punctuation">,</span> p<span class="token punctuation">.</span>SPID
 <span class="token keyword">FROM</span> v$locked_object l<span class="token punctuation">,</span> all_objects o<span class="token punctuation">,</span> v$<span class="token keyword">session</span> s<span class="token punctuation">,</span>v$process p
 <span class="token keyword">WHERE</span> l<span class="token punctuation">.</span>object_id <span class="token operator">=</span> o<span class="token punctuation">.</span>object_id <span class="token operator">AND</span> l<span class="token punctuation">.</span>session_id <span class="token operator">=</span> s<span class="token punctuation">.</span>sid <span class="token operator">AND</span> s<span class="token punctuation">.</span>paddr <span class="token operator">=</span> p<span class="token punctuation">.</span>addr
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sid<span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token keyword">serial</span><span class="token comment">#;</span>

<span class="token comment">-- 结束</span>
<span class="token keyword">alter</span> system <span class="token keyword">kill</span> <span class="token keyword">session</span> <span class="token string">'sid,serial#'</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>orakill SID spid
</code></pre></div><p><strong>查看所有表结构</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>Table_Name <span class="token operator">||</span> chr<span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">||</span> t3<span class="token punctuation">.</span>comments       <span class="token keyword">AS</span> <span class="token string">&quot;表名称及说明&quot;</span><span class="token punctuation">,</span>
       <span class="token comment">--t3.comments                                 AS &quot;表说明&quot;,</span>
       t1<span class="token punctuation">.</span>COLUMN_ID                                  <span class="token keyword">AS</span> <span class="token string">&quot;序号&quot;</span><span class="token punctuation">,</span>
       t1<span class="token punctuation">.</span>Column_Name                                <span class="token keyword">AS</span> <span class="token string">&quot;字段名称&quot;</span><span class="token punctuation">,</span>
       t1<span class="token punctuation">.</span>DATA_TYPE <span class="token operator">||</span> <span class="token string">'('</span> <span class="token operator">||</span> t1<span class="token punctuation">.</span>DATA_LENGTH <span class="token operator">||</span> <span class="token string">')'</span>  <span class="token keyword">AS</span> <span class="token string">&quot;数据类型&quot;</span><span class="token punctuation">,</span>
       t1<span class="token punctuation">.</span>NullAble                                   <span class="token keyword">AS</span> <span class="token string">&quot;是否为空&quot;</span><span class="token punctuation">,</span>
       t2<span class="token punctuation">.</span>Comments                                   <span class="token keyword">AS</span> <span class="token string">&quot;字段说明&quot;</span><span class="token punctuation">,</span>
       t1<span class="token punctuation">.</span>Data_Default                               <span class="token keyword">AS</span> <span class="token string">&quot;默认值&quot;</span>
       <span class="token comment">--t4.created                                  AS &quot;建表时间&quot;</span>
<span class="token keyword">FROM</span> cols t1
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_col_comments t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Table_name <span class="token operator">AND</span> t1<span class="token punctuation">.</span>Column_Name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Column_Name
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_tab_comments t3 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t3<span class="token punctuation">.</span>Table_name
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_objects t4 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>table_name <span class="token operator">=</span> t4<span class="token punctuation">.</span>OBJECT_NAME
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> t4<span class="token punctuation">.</span>Object_Name
    <span class="token keyword">FROM</span> User_objects t4
    <span class="token keyword">WHERE</span> t4<span class="token punctuation">.</span>Object_Type <span class="token operator">=</span> <span class="token string">'TABLE'</span> <span class="token operator">AND</span> t4<span class="token punctuation">.</span><span class="token keyword">Temporary</span> <span class="token operator">=</span> <span class="token string">'Y'</span> <span class="token operator">AND</span> t4<span class="token punctuation">.</span>Object_Name <span class="token operator">=</span> t1<span class="token punctuation">.</span>Table_Name
<span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> t1<span class="token punctuation">.</span>Table_Name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>Column_ID<span class="token punctuation">;</span>

<span class="token comment">-- 查询表字段信息</span>
<span class="token keyword">WITH</span> ct <span class="token keyword">AS</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> u3<span class="token punctuation">.</span>table_name<span class="token punctuation">,</span>u3<span class="token punctuation">.</span>column_name<span class="token punctuation">,</span>u4<span class="token punctuation">.</span>constraint_type <span class="token keyword">FROM</span> user_cons_columns u3
    <span class="token keyword">JOIN</span> user_constraints u4 <span class="token keyword">ON</span> u4<span class="token punctuation">.</span>constraint_name<span class="token operator">=</span>u3<span class="token punctuation">.</span>constraint_name <span class="token operator">AND</span> u4<span class="token punctuation">.</span>constraint_type<span class="token operator">=</span><span class="token string">'P'</span>
<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> u1<span class="token punctuation">.</span>column_id
<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>column_name
<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>data_type <span class="token keyword">AS</span> column_type
<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> u1<span class="token punctuation">.</span>data_type<span class="token operator">=</span><span class="token string">'NVARCHAR2'</span> <span class="token keyword">THEN</span> u1<span class="token punctuation">.</span>data_length<span class="token operator">/</span><span class="token number">2</span> <span class="token keyword">ELSE</span> u1<span class="token punctuation">.</span>data_length <span class="token keyword">END</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> data_length
<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> DECODE<span class="token punctuation">(</span>u1<span class="token punctuation">.</span>nullable<span class="token punctuation">,</span> <span class="token string">'Y'</span><span class="token punctuation">,</span> <span class="token string">'N'</span><span class="token punctuation">,</span> <span class="token string">'N'</span><span class="token punctuation">,</span> <span class="token string">'Y'</span><span class="token punctuation">,</span> <span class="token string">'N'</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">'Y'</span> <span class="token keyword">THEN</span> <span class="token number">0</span> <span class="token keyword">ELSE</span> <span class="token number">1</span> <span class="token keyword">END</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> nullable
<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>data_precision <span class="token keyword">AS</span> data_precision
<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>data_scale <span class="token keyword">AS</span> data_scale
<span class="token punctuation">,</span> u2<span class="token punctuation">.</span>comments
<span class="token punctuation">,</span> DECODE<span class="token punctuation">(</span>ct<span class="token punctuation">.</span>constraint_type<span class="token punctuation">,</span><span class="token string">'P'</span><span class="token punctuation">,</span><span class="token string">'PRI'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> column_key
<span class="token keyword">FROM</span> user_tab_columns u1
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_col_comments u2 <span class="token keyword">ON</span> u1<span class="token punctuation">.</span>table_name<span class="token operator">=</span>u2<span class="token punctuation">.</span>table_name <span class="token operator">AND</span> u1<span class="token punctuation">.</span>column_name<span class="token operator">=</span>u2<span class="token punctuation">.</span>column_name
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> ct <span class="token keyword">ON</span> ct<span class="token punctuation">.</span>table_name<span class="token operator">=</span>u1<span class="token punctuation">.</span>table_name <span class="token operator">AND</span> ct<span class="token punctuation">.</span>column_name<span class="token operator">=</span>u1<span class="token punctuation">.</span>column_name
<span class="token keyword">WHERE</span> u1<span class="token punctuation">.</span>table_name<span class="token operator">=</span> <span class="token string">'表名'</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u1<span class="token punctuation">.</span>column_id
</code></pre></div><p><strong>日期时间</strong></p> <ul><li><a href="https://blog.csdn.net/HaHa_Sir/article/details/125572325" target="_blank" rel="noopener noreferrer">Oracle日期格式转换 to_date,to_char,to_timetamp 相互转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> SYSDATE<span class="token punctuation">,</span> SYSTIMESTAMP <span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>TO_TIMESTAMP<span class="token punctuation">(</span><span class="token string">'2023-05-08 10:10:10'</span><span class="token punctuation">,</span> <span class="token string">'yyyy-mm-dd hh24:mi:ss'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'ww'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token comment">-- 得到当天凌晨0点0分0秒的日期</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 获取今天最后的时间（即午夜之前的那一刻）</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.99999</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">86400</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">SECOND</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">DAY</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">SECOND</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'23'</span> <span class="token keyword">HOUR</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'59'</span> <span class="token keyword">MINUTE</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'59'</span> <span class="token keyword">SECOND</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 获取本周开始日期（星期一）</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'IW'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 获取本周结束日期（星期日）</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'IW'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 获取当月开始时间和结束时间</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'MM'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>LAST_DAY<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token number">0.99999</span> <span class="token keyword">FROM</span> DUAL
<span class="token comment">-- 获取今年开始时间和结束时间</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> start_date<span class="token punctuation">,</span>
       TO_CHAR<span class="token punctuation">(</span>LAST_DAY<span class="token punctuation">(</span>TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.99999</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> end_date
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TO_DATE<span class="token punctuation">(</span>EXTRACT<span class="token punctuation">(</span><span class="token keyword">YEAR</span> <span class="token keyword">FROM</span> SYSDATE<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'-01-01'</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> start_date<span class="token punctuation">,</span>
       TO_DATE<span class="token punctuation">(</span>EXTRACT<span class="token punctuation">(</span><span class="token keyword">YEAR</span> <span class="token keyword">FROM</span> SYSDATE<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'-12-31 23:59:59'</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> end_date
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> start_date<span class="token punctuation">,</span>
  TRUNC<span class="token punctuation">(</span>SYSDATE <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">YEAR</span><span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">SECOND</span> <span class="token keyword">AS</span> end_date
<span class="token keyword">FROM</span> dual
<span class="token comment">-- FM格式模型来实现不要前导零</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'FMMM'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> one_digit_month
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>


<span class="token comment">-- 获取倒推时间列表</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>sysdate <span class="token operator">-</span> NumToDSInterval<span class="token punctuation">(</span><span class="token keyword">level</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'hour'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ds <span class="token comment">-- 'day','hour','minute','second'</span>
<span class="token punctuation">,</span> TRUNC<span class="token punctuation">(</span>sysdate <span class="token operator">-</span> NumToYMInterval<span class="token punctuation">(</span><span class="token keyword">level</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'month'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ym <span class="token comment">-- 'year','month'</span>
<span class="token keyword">FROM</span> dual <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">level</span> <span class="token operator">&lt;=</span> <span class="token number">12</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>Add_Months<span class="token punctuation">(</span>TRUNC<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">'YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">Level</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'FMMonth'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> month_name <span class="token keyword">FROM</span> Dual <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">Level</span> <span class="token operator">&lt;=</span> <span class="token number">12</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE <span class="token operator">-</span> <span class="token keyword">LEVEL</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'HH24'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> HOURMIN <span class="token keyword">FROM</span> DUAL <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">LEVEL</span> <span class="token operator">&lt;=</span> <span class="token number">12</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 将数据按半小时进行分组</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'30'</span> <span class="token keyword">THEN</span> <span class="token string">':00'</span> <span class="token keyword">ELSE</span> <span class="token string">':30'</span> <span class="token keyword">END</span> <span class="token keyword">AS</span> half_hour<span class="token punctuation">,</span>
       <span class="token function">SUM</span><span class="token punctuation">(</span>col_8<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_money
<span class="token keyword">FROM</span> table_name
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'30'</span> <span class="token keyword">THEN</span> <span class="token string">':00'</span> <span class="token keyword">ELSE</span> <span class="token string">':30'</span> <span class="token keyword">END</span>

<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'HH24'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'30'</span> <span class="token keyword">THEN</span> <span class="token keyword">INTERVAL</span> <span class="token string">'0'</span> <span class="token keyword">MINUTE</span> <span class="token keyword">ELSE</span> <span class="token keyword">INTERVAL</span> <span class="token string">'30'</span> <span class="token keyword">MINUTE</span> <span class="token keyword">END</span> <span class="token keyword">AS</span> half_hour<span class="token punctuation">,</span>
       <span class="token function">SUM</span><span class="token punctuation">(</span>col_8<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_money
<span class="token keyword">FROM</span> table_name
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> TRUNC<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'HH24'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'30'</span> <span class="token keyword">THEN</span> <span class="token keyword">INTERVAL</span> <span class="token string">'0'</span> <span class="token keyword">MINUTE</span> <span class="token keyword">ELSE</span> <span class="token keyword">INTERVAL</span> <span class="token string">'30'</span> <span class="token keyword">MINUTE</span> <span class="token keyword">END</span>
</code></pre></div><p><strong>随机取数</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> test a
<span class="token comment">--WHERE rownum = FLOOR(DBMS_RANDOM.VALUE(1, 10))</span>
<span class="token keyword">WHERE</span> <span class="token function">MOD</span><span class="token punctuation">(</span>rownum<span class="token punctuation">,</span> floor<span class="token punctuation">(</span>DBMS_RANDOM<span class="token punctuation">.</span><span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">FETCH</span> <span class="token keyword">FIRST</span> <span class="token keyword">ROW</span> ONLY

<span class="token comment">-- 重建排序</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> rownum <span class="token keyword">as</span> rn
    <span class="token keyword">FROM</span> test a
<span class="token punctuation">)</span>
<span class="token keyword">WHERE</span> <span class="token function">MOD</span><span class="token punctuation">(</span>rn<span class="token punctuation">,</span> floor<span class="token punctuation">(</span>DBMS_RANDOM<span class="token punctuation">.</span><span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> dbms_random<span class="token punctuation">.</span><span class="token keyword">value</span>
<span class="token keyword">FETCH</span> <span class="token keyword">FIRST</span> <span class="token keyword">ROW</span> ONLY<span class="token punctuation">;</span>

<span class="token comment">-- Oracle类PostgreSQL的generate_series函数</span>
<span class="token keyword">SELECT</span> ROWNUM <span class="token keyword">AS</span> num <span class="token keyword">FROM</span> dual <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> ROWNUM <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">LEVEL</span> <span class="token keyword">AS</span> num <span class="token keyword">FROM</span> DUAL <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">LEVEL</span> <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 使用序列</span>
<span class="token keyword">CREATE</span> SEQUENCE seq_num <span class="token keyword">START</span> <span class="token keyword">WITH</span> <span class="token number">1</span> INCREMENT <span class="token keyword">BY</span> <span class="token number">1</span> NOMAXVALUE<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">NEXT</span> <span class="token keyword">VALUE</span> <span class="token keyword">FOR</span> seq_num <span class="token keyword">AS</span> num <span class="token keyword">FROM</span> DUAL <span class="token keyword">WHERE</span> <span class="token keyword">NEXT</span> <span class="token keyword">VALUE</span> <span class="token keyword">FOR</span> seq_num <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="postgresql"><a href="#postgresql" class="header-anchor">#</a> PostgreSQL</h2> <ul><li><a href="https://github.com/topics/postgrest" target="_blank" rel="noopener noreferrer">https://github.com/topics/postgrest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/topics/postgresql" target="_blank" rel="noopener noreferrer">https://github.com/topics/postgresql<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/dhamaniasad/awesome-postgres" target="_blank" rel="noopener noreferrer">https://github.com/dhamaniasad/awesome-postgres<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ul><li><a href="https://github.com/postgres/postgres" target="_blank" rel="noopener noreferrer">https://github.com/postgres/postgres<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><a href="http://postgres.cn/docs/14/catalogs.html" target="_blank" rel="noopener noreferrer">http://postgres.cn/docs/14/catalogs.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING" target="_blank" rel="noopener noreferrer">连接字符串<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jdbc.postgresql.org" target="_blank" rel="noopener noreferrer">https://jdbc.postgresql.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><a href="https://github.com/postgrespro" target="_blank" rel="noopener noreferrer">https://github.com/postgrespro<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/citusdata" target="_blank" rel="noopener noreferrer">https://github.com/citusdata<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/neondatabase/neon" target="_blank" rel="noopener noreferrer">https://github.com/neondatabase/neon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/pgpartman" target="_blank" rel="noopener noreferrer">https://github.com/pgpartman<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/PostgREST/postgrest" target="_blank" rel="noopener noreferrer">https://github.com/PostgREST/postgrest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/CrunchyData" target="_blank" rel="noopener noreferrer">https://github.com/CrunchyData<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>客户端 <a href="https://github.com/sosedoff/pgweb" target="_blank" rel="noopener noreferrer">https://github.com/sosedoff/pgweb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/prest/prest" target="_blank" rel="noopener noreferrer">https://github.com/prest/prest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/alibaba/PolarDB-for-PostgreSQL" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/PolarDB-for-PostgreSQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/npgsql" target="_blank" rel="noopener noreferrer">https://github.com/npgsql<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/commandprompt/pgmanage" target="_blank" rel="noopener noreferrer">https://github.com/commandprompt/pgmanage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>管理器 <a href="https://github.com/sorintlab/stolon" target="_blank" rel="noopener noreferrer">https://github.com/sorintlab/stolon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/achristmascarl/rainfrog" target="_blank" rel="noopener noreferrer">https://github.com/achristmascarl/rainfrog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>连接池工具 <a href="https://github.com/pgbouncer/pgbouncer" target="_blank" rel="noopener noreferrer">https://github.com/pgbouncer/pgbouncer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>扩展Rust开发框架 <a href="https://github.com/tcdi/pgx" target="_blank" rel="noopener noreferrer">https://github.com/tcdi/pgx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ul><li>文本搜索和分析 <a href="https://github.com/zombodb/zombodb" target="_blank" rel="noopener noreferrer">https://github.com/zombodb/zombodb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ul><li>开发指南 <a href="https://github.com/dongxuyang1985/postgresql_dev_guide" target="_blank" rel="noopener noreferrer">https://github.com/dongxuyang1985/postgresql_dev_guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.zhihu.com/people/dongxuyang85/posts" target="_blank" rel="noopener noreferrer">不剪发的Tony老师《SQL编程思想》作者<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/jsbylibo/article/details/108448400" target="_blank" rel="noopener noreferrer">Postgresql库常用系统表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/neweastsun/article/details/112147693" target="_blank" rel="noopener noreferrer">PostgreSQL upsert(插入更新)教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844904061414670350" target="_blank" rel="noopener noreferrer">PostgreSQL_树形结构的递归查询<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/sunshuo1231/article/details/79634998" target="_blank" rel="noopener noreferrer">postgresql递归查询<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/u011447403/article/details/122877396" target="_blank" rel="noopener noreferrer">PostgreSQL窗口函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/432124325" target="_blank" rel="noopener noreferrer">PostgreSQL 触发器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/Mr_Door/article/details/102527225" target="_blank" rel="noopener noreferrer">PostgreSQL的存储过程及基本使用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/neweastsun/article/details/121574175" target="_blank" rel="noopener noreferrer">PostgreSQL事件触发器实战教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_42583514/article/details/123063420" target="_blank" rel="noopener noreferrer">pg12.5中分区表的一些操作<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/dazuiba008/article/details/116709091" target="_blank" rel="noopener noreferrer">Postgresql12 分区表实例以及自动添加分区<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/su377486/article/details/82722391" target="_blank" rel="noopener noreferrer">postgresql常见数值,字符,日期类型常见函数总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/orangeform/archive/2012/06/08/2315679.html" target="_blank" rel="noopener noreferrer">PostgreSQL学习手册(目录)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/ffb833bd4fb5" target="_blank" rel="noopener noreferrer">PostgreSQL中的OID<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token punctuation">.</span>\initdb<span class="token punctuation">.</span>exe <span class="token operator">-</span>D <span class="token string">&quot;D:\PostgreSQL\data&quot;</span> <span class="token operator">--</span>locale=C <span class="token operator">--</span>username=postgres <span class="token operator">--</span>encoding=UTF8
<span class="token punctuation">.</span>\pg_ctl<span class="token punctuation">.</span>exe <span class="token operator">-</span>D <span class="token string">&quot;D:\PostgreSQL\data&quot;</span> <span class="token operator">-</span>l 日志文件 <span class="token function">start</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 插入或更新 upsert</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name<span class="token punctuation">(</span>column_list<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span><span class="token punctuation">(</span>value_list<span class="token punctuation">)</span>
<span class="token keyword">ON</span> CONFLICT target <span class="token keyword">action</span><span class="token punctuation">;</span>

<span class="token comment">-- https://zhuanlan.zhihu.com/p/342722338</span>
<span class="token comment">-- https://dba.stackexchange.com/questions/91247/optimizing-a-postgres-query-with-a-large-in/91539</span>
<span class="token comment">-- https://www.postgresql.org/docs/current/arrays.html</span>
<span class="token comment">-- https://www.postgresql.org/docs/current/functions-array.html</span>
<span class="token comment">-- 临时表</span>
<span class="token keyword">with</span> tmp_table <span class="token keyword">as</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> unnest<span class="token punctuation">(</span><span class="token string">'{
        10000, 11000, 12000, 13000, 14000, 15000, 16000, 17000, 18000, 19000, 20000, 21000, 22000
    }'</span>::<span class="token keyword">bigint</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token string">&quot;aid&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tmp_table

<span class="token comment">-- https://zhuanlan.zhihu.com/p/38381497</span>
<span class="token comment">-- WITH ORDINALITY返回记录的每一行行号</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> unnest<span class="token punctuation">(</span>ARRAY<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">WITH</span> ORDINALITY<span class="token punctuation">;</span>

<span class="token comment">-- 常量子查询</span>
字段 <span class="token operator">in</span> <span class="token punctuation">(</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">11000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">13000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">14000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">15000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">16000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">17000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">18000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">19000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- JSON</span>
<span class="token comment">-- https://www.postgresql.org/docs/current/functions-json.html</span>
<span class="token comment">-- https://www.crunchydata.com/developers/playground/basics-of-jsonb</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> jsonb_to_recordset<span class="token punctuation">(</span><span class="token string">'[{&quot;name&quot;: &quot;batman&quot;}, {&quot;name&quot;: &quot;superman&quot;}]'</span>::jsonb<span class="token punctuation">)</span> <span class="token keyword">AS</span> x<span class="token punctuation">(</span>name <span class="token keyword">TEXT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> json_array_elements_text<span class="token punctuation">(</span><span class="token string">'[&quot;batman&quot;, &quot;superman&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>查询Postgres数据库中的所有表信息（表名、备注）</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	relname <span class="token keyword">AS</span> tabname
	<span class="token punctuation">,</span> cast<span class="token punctuation">(</span>obj_description<span class="token punctuation">(</span> relfilenode<span class="token punctuation">,</span> <span class="token string">'pg_class'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">VARCHAR</span> <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">COMMENT</span>
    <span class="token punctuation">,</span> b<span class="token punctuation">.</span>description
<span class="token keyword">FROM</span> pg_class c
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> pg_description b <span class="token keyword">ON</span> b<span class="token punctuation">.</span>objsubid <span class="token operator">=</span><span class="token number">0</span> <span class="token operator">AND</span> a<span class="token punctuation">.</span>oid<span class="token operator">=</span>b<span class="token punctuation">.</span>objoid
<span class="token keyword">WHERE</span> relkind <span class="token operator">=</span> <span class="token string">'r'</span> <span class="token operator">AND</span> relname <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">'pg_%'</span> <span class="token operator">AND</span> relname <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">'sql_%'</span>
    <span class="token comment">-- AND relchecks=0 -- 过滤掉分表</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> relname


<span class="token comment">-- 查询表字段信息</span>
<span class="token keyword">SELECT</span> col_description<span class="token punctuation">(</span>a<span class="token punctuation">.</span>attrelid<span class="token punctuation">,</span>a<span class="token punctuation">.</span>attnum<span class="token punctuation">)</span> <span class="token keyword">AS</span> comments
<span class="token comment">--, format_type(a.atttypid,a.atttypmod) AS column_type&quot;</span>
<span class="token punctuation">,</span> t<span class="token punctuation">.</span>typname <span class="token keyword">AS</span> column_type
<span class="token punctuation">,</span> a<span class="token punctuation">.</span>attname <span class="token keyword">AS</span> column_name
<span class="token punctuation">,</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> a<span class="token punctuation">.</span>attnotnull <span class="token keyword">THEN</span> <span class="token number">0</span> <span class="token keyword">ELSE</span> <span class="token number">1</span> <span class="token keyword">END</span> <span class="token keyword">AS</span> nullable
<span class="token punctuation">,</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> p<span class="token punctuation">.</span>conname <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token keyword">THEN</span> <span class="token string">''</span> <span class="token keyword">ELSE</span> <span class="token string">'PRI'</span> <span class="token keyword">END</span> <span class="token keyword">AS</span> column_key
<span class="token punctuation">,</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> a<span class="token punctuation">.</span>attlen<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token keyword">THEN</span> a<span class="token punctuation">.</span>attlen
        <span class="token keyword">WHEN</span> t<span class="token punctuation">.</span>typname<span class="token operator">=</span><span class="token string">'numeric'</span> <span class="token keyword">THEN</span> pc<span class="token punctuation">.</span>numeric_precision
        <span class="token keyword">WHEN</span> t<span class="token punctuation">.</span>typname<span class="token operator">=</span><span class="token string">'timestamp'</span> <span class="token keyword">THEN</span> pc<span class="token punctuation">.</span>datetime_precision
        <span class="token keyword">ELSE</span> a<span class="token punctuation">.</span>atttypmod<span class="token operator">-</span><span class="token number">4</span>
  <span class="token keyword">END</span> <span class="token keyword">AS</span> data_length
<span class="token punctuation">,</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> a<span class="token punctuation">.</span>attlen<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token keyword">THEN</span> a<span class="token punctuation">.</span>attlen
        <span class="token keyword">WHEN</span> t<span class="token punctuation">.</span>typname<span class="token operator">=</span><span class="token string">'numeric'</span> <span class="token keyword">THEN</span> pc<span class="token punctuation">.</span>numeric_precision<span class="token operator">-</span>pc<span class="token punctuation">.</span>numeric_scale
        <span class="token keyword">WHEN</span> t<span class="token punctuation">.</span>typname<span class="token operator">=</span><span class="token string">'timestamp'</span> <span class="token keyword">THEN</span> pc<span class="token punctuation">.</span>datetime_precision
        <span class="token keyword">WHEN</span> t<span class="token punctuation">.</span>typname<span class="token operator">=</span><span class="token string">'varchar'</span> <span class="token keyword">THEN</span> pc<span class="token punctuation">.</span>character_maximum_length
        <span class="token keyword">ELSE</span> a<span class="token punctuation">.</span>atttypmod<span class="token operator">-</span><span class="token number">4</span>
  <span class="token keyword">END</span> <span class="token keyword">AS</span> data_precision
<span class="token punctuation">,</span> pc<span class="token punctuation">.</span>numeric_scale <span class="token keyword">AS</span> data_scale
<span class="token keyword">FROM</span> pg_class c
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> pg_attribute a <span class="token keyword">ON</span> a<span class="token punctuation">.</span>attrelid<span class="token operator">=</span>c<span class="token punctuation">.</span>oid
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> pg_constraint <span class="token keyword">as</span> p <span class="token keyword">ON</span> c<span class="token punctuation">.</span>oid<span class="token operator">=</span>p<span class="token punctuation">.</span>conrelid <span class="token operator">AND</span> p<span class="token punctuation">.</span>conkey<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">.</span>attnum <span class="token operator">AND</span> p<span class="token punctuation">.</span>contype<span class="token operator">=</span><span class="token string">'p'</span>
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> pg_type t <span class="token keyword">ON</span> t<span class="token punctuation">.</span>oid<span class="token operator">=</span>a<span class="token punctuation">.</span>atttypid
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> pg_namespace n <span class="token keyword">ON</span> n<span class="token punctuation">.</span>oid<span class="token operator">=</span>c<span class="token punctuation">.</span>relnamespace
<span class="token comment">-- LEFT JOIN pg_tables tb ON tb.schemaname=n.nspname AND tb.tablename=c.relname</span>
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span> pc <span class="token keyword">ON</span> pc<span class="token punctuation">.</span>table_schema<span class="token operator">=</span>n<span class="token punctuation">.</span>nspname <span class="token operator">AND</span> pc<span class="token punctuation">.</span>table_name<span class="token operator">=</span>c<span class="token punctuation">.</span>relname <span class="token operator">AND</span> pc<span class="token punctuation">.</span>column_name<span class="token operator">=</span>a<span class="token punctuation">.</span>attname
<span class="token keyword">WHERE</span> a<span class="token punctuation">.</span>attisdropped<span class="token operator">=</span><span class="token string">'f'</span> <span class="token operator">AND</span> a<span class="token punctuation">.</span>attnum<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">AND</span> c<span class="token punctuation">.</span>relname<span class="token operator">=</span><span class="token string">'表名'</span>
<span class="token comment">-- ORDER BY a.attnum</span>
</code></pre></div><p><strong>查询Postgres数据库中的表字段名、类型、注释、注释是否为空</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- information_schema.COLUMNS</span>
<span class="token keyword">SELECT</span>
	a<span class="token punctuation">.</span>attname <span class="token keyword">AS</span> NAME<span class="token punctuation">,</span>
	col_description<span class="token punctuation">(</span> a<span class="token punctuation">.</span>attrelid<span class="token punctuation">,</span> a<span class="token punctuation">.</span>attnum <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">COMMENT</span><span class="token punctuation">,</span>
	format_type<span class="token punctuation">(</span> a<span class="token punctuation">.</span>atttypid<span class="token punctuation">,</span> a<span class="token punctuation">.</span>atttypmod <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">type</span><span class="token punctuation">,</span>
	a<span class="token punctuation">.</span>attnotnull <span class="token keyword">AS</span> notnull
<span class="token keyword">FROM</span>
	pg_class <span class="token keyword">AS</span> c<span class="token punctuation">,</span>
	pg_attribute <span class="token keyword">AS</span> a
<span class="token keyword">WHERE</span>
	c<span class="token punctuation">.</span>relname <span class="token operator">=</span> <span class="token string">'表名'</span>
	<span class="token operator">AND</span> a<span class="token punctuation">.</span>attrelid <span class="token operator">=</span> c<span class="token punctuation">.</span>oid
	<span class="token operator">AND</span> a<span class="token punctuation">.</span>attnum <span class="token operator">&gt;</span><span class="token number">0</span>
</code></pre></div><p><strong>UUID</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 不建议在高并发下使用，以下三个语句都可以生成</span>
<span class="token keyword">SELECT</span> uuid_in<span class="token punctuation">(</span>md5<span class="token punctuation">(</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>::<span class="token keyword">text</span> <span class="token operator">||</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>::<span class="token keyword">text</span><span class="token punctuation">)</span>::cstring<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> uuid_in<span class="token punctuation">(</span>md5<span class="token punctuation">(</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>::<span class="token keyword">text</span> <span class="token operator">||</span> clock_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span>::<span class="token keyword">text</span><span class="token punctuation">)</span>::cstring<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> md5<span class="token punctuation">(</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>::<span class="token keyword">text</span> <span class="token operator">||</span> clock_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span>::<span class="token keyword">text</span><span class="token punctuation">)</span>::uuid<span class="token punctuation">;</span>
<span class="token comment">-- 去掉-，32位</span>
<span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span>md5<span class="token punctuation">(</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>::<span class="token keyword">text</span> <span class="token operator">||</span> clock_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span>::<span class="token keyword">text</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>日期时间</strong></p> <ul><li><a href="https://www.postgresql.org/docs/current/functions-datetime.html" target="_blank" rel="noopener noreferrer">https://www.postgresql.org/docs/current/functions-datetime.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> to_timestamp<span class="token punctuation">(</span><span class="token string">'2022-08-02 00:00:00'</span><span class="token punctuation">,</span> <span class="token string">'yyyy-MM-dd hh24:mi:ss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">'2022-08-02 23:59:59'</span><span class="token punctuation">,</span> <span class="token string">'yyyy-MM-dd HH24:mi:ss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> to_char<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'yyyy-MM-dd HH24:mi:ss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> date_trunc<span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">interval</span> <span class="token string">'1d'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">'6 hours'</span><span class="token punctuation">)</span>::<span class="token keyword">INTERVAL</span><span class="token punctuation">;</span>
<span class="token comment">-- 得到当天凌晨0点0分0秒的日期</span>
<span class="token keyword">select</span> date_trunc<span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 获取今天最后的时间（即午夜之前的那一刻）</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_DATE</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1 day'</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1 microsecond'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token punctuation">(</span>date_trunc<span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1 day'</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1 microsecond'</span><span class="token punctuation">)</span>::<span class="token keyword">timestamp</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> DATE_TRUNC<span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">,</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1 day - 1 microsecond'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> DATE_TRUNC<span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">,</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1 day'</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1 microsecond'</span><span class="token punctuation">;</span>
<span class="token comment">-- 月末</span>
<span class="token keyword">select</span> date_trunc<span class="token punctuation">(</span><span class="token string">'month'</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'1 months'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-1 days'</span><span class="token punctuation">;</span>

<span class="token comment">-- 获取周数</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>week <span class="token keyword">FROM</span> <span class="token keyword">timestamp</span> <span class="token string">'2022-01-01'</span><span class="token punctuation">)</span> week<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> date_part<span class="token punctuation">(</span><span class="token string">'week'</span><span class="token punctuation">,</span> <span class="token keyword">timestamp</span> <span class="token string">'2022-01-01'</span><span class="token punctuation">)</span> week<span class="token punctuation">;</span>
<span class="token comment">-- 遍历两个日期的每一天 https://stackoverflow.com/questions/6870499/generate-series-equivalent-in-mysql</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> generate_series<span class="token punctuation">(</span><span class="token string">'2022-09-21 00:00:00'</span>::<span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span> <span class="token string">'2022-09-22 00:00:00'</span>::<span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span> <span class="token string">'1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 遍历两个日期的每小时</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> generate_series<span class="token punctuation">(</span><span class="token string">'2022-09-21 00:00:00'</span>::<span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span> <span class="token string">'2022-09-22 00:00:00'</span>::<span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span> <span class="token string">'1 hour'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 每一天每一小时每一行的列数据</span>
<span class="token keyword">select</span>
    d::<span class="token keyword">date</span>::<span class="token keyword">text</span> <span class="token operator">||</span> <span class="token string">' '</span> <span class="token operator">||</span>
        to_char<span class="token punctuation">(</span>d::<span class="token keyword">time</span><span class="token punctuation">,</span> <span class="token string">'HH24:MM:SS'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">' - '</span> <span class="token operator">||</span>
        to_char<span class="token punctuation">(</span>d::<span class="token keyword">time</span> <span class="token operator">+</span> <span class="token keyword">interval</span> <span class="token string">'1 hour'</span> <span class="token operator">-</span> <span class="token keyword">interval</span> <span class="token string">'1 second'</span><span class="token punctuation">,</span> <span class="token string">'HH24:MM:SS'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">hour</span>
<span class="token keyword">from</span>
    generate_series<span class="token punctuation">(</span>
       <span class="token punctuation">(</span><span class="token keyword">date</span> <span class="token string">'2022-09-21'</span><span class="token punctuation">)</span>::<span class="token keyword">timestamp</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token keyword">date</span> <span class="token string">'2022-09-22'</span><span class="token punctuation">)</span>::<span class="token keyword">timestamp</span><span class="token punctuation">,</span>
       <span class="token keyword">interval</span> <span class="token string">'1 hour'</span>
     <span class="token punctuation">)</span> <span class="token keyword">as</span> d
<span class="token comment">-- 计算时间差，实际时间不到1小时时，DATEDIFF会返回1，而DATE_PART返回0</span>
<span class="token keyword">SELECT</span> DATE_PART<span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">,</span> <span class="token string">'2011-12-30 08:55'</span>::<span class="token keyword">timestamp</span> <span class="token operator">-</span> <span class="token string">'2011-12-30 09:05'</span>::<span class="token keyword">timestamp</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">+</span> 
        DATE_PART<span class="token punctuation">(</span><span class="token string">'hour'</span><span class="token punctuation">,</span> <span class="token string">'2011-12-30 08:55'</span>::<span class="token keyword">timestamp</span> <span class="token operator">-</span> <span class="token string">'2011-12-30 09:05'</span>::<span class="token keyword">timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 计算月份差</span>
<span class="token keyword">SELECT</span> <span class="token number">12</span><span class="token operator">*</span>EXTRACT<span class="token punctuation">(</span><span class="token keyword">YEAR</span> <span class="token keyword">from</span> age<span class="token punctuation">(</span><span class="token string">'2023-06-01'</span><span class="token punctuation">,</span><span class="token string">'2022-01-01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span>EXTRACT<span class="token punctuation">(</span><span class="token keyword">MONTH</span> <span class="token keyword">from</span> age<span class="token punctuation">(</span><span class="token string">'2023-06-01'</span><span class="token punctuation">,</span><span class="token string">'2022-01-01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 提取days时结果是准确的；但提取hours的时候，出现的小时数没有考虑日期，最大23</span>
<span class="token keyword">SELECT</span> EXTRACT<span class="token punctuation">(</span>DAYS <span class="token keyword">FROM</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token string">'2020-01-31 10:00:00'</span>::<span class="token keyword">timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token punctuation">(</span>EXTRACT<span class="token punctuation">(</span>EPOCH <span class="token keyword">FROM</span> <span class="token keyword">timestamp</span> <span class="token string">'2023-12-25 12:00:00'</span> <span class="token operator">-</span> <span class="token keyword">timestamp</span> <span class="token string">'2023-12-20 00:00:00'</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">86400</span><span class="token punctuation">)</span>::<span class="token keyword">NUMERIC</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> days_diff<span class="token punctuation">;</span>
</code></pre></div><p><strong>快速复制备份表</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 表结构复制，包括索引和约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">schema</span><span class="token punctuation">.</span>table_name_bak <span class="token punctuation">(</span><span class="token operator">like</span> <span class="token keyword">schema</span><span class="token punctuation">.</span>table_name including <span class="token keyword">all</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>整数除法保留小数</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span>::float8
<span class="token keyword">select</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span>::<span class="token keyword">numeric</span>
<span class="token keyword">select</span> <span class="token number">1</span><span class="token operator">/</span>cast<span class="token punctuation">(</span><span class="token number">2</span> <span class="token keyword">as</span> <span class="token keyword">numeric</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="sqlite3"><a href="#sqlite3" class="header-anchor">#</a> SQLite3</h2> <ul><li><a href="https://github.com/sqlite/sqlite" target="_blank" rel="noopener noreferrer">https://github.com/sqlite/sqlite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/tursodatabase/libsql" target="_blank" rel="noopener noreferrer">https://github.com/tursodatabase/libsql<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ul><li><a href="https://blog.csdn.net/hexingen/article/details/71577318" target="_blank" rel="noopener noreferrer">SQLite教程（内置日期和时间函数）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.twle.cn/l/yufei/sqlite/sqlite-basic-index.html" target="_blank" rel="noopener noreferrer">SQLite 教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.runoob.com/sqlite/sqlite-tutorial.html" target="_blank" rel="noopener noreferrer">SQLite 教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/feiyihexin/article/details/99728504" target="_blank" rel="noopener noreferrer">SQLite3 数据类型与亲和类型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ul><li>查看 <a href="https://github.com/coleifer/sqlite-web" target="_blank" rel="noopener noreferrer">https://github.com/coleifer/sqlite-web<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>扩展 <a href="https://github.com/mycelial/mycelite" target="_blank" rel="noopener noreferrer">https://github.com/mycelial/mycelite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/sqlitebrowser/sqlitebrowser" target="_blank" rel="noopener noreferrer">https://github.com/sqlitebrowser/sqlitebrowser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>加密SQLite <a href="https://github.com/sqlcipher" target="_blank" rel="noopener noreferrer">https://github.com/sqlcipher<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/utelle/wxsqlite3" target="_blank" rel="noopener noreferrer">https://github.com/utelle/wxsqlite3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/resilar/sqleet" target="_blank" rel="noopener noreferrer">https://github.com/resilar/sqleet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Java实现 <a href="https://sqljet.com" target="_blank" rel="noopener noreferrer">https://sqljet.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>分布式关系数据库 <a href="https://github.com/rqlite/rqlite" target="_blank" rel="noopener noreferrer">https://github.com/rqlite/rqlite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/jlongster/absurd-sql" target="_blank" rel="noopener noreferrer">https://github.com/jlongster/absurd-sql<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>后端 <a href="https://github.com/pocketbase/pocketbase" target="_blank" rel="noopener noreferrer">https://github.com/pocketbase/pocketbase<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong>连接符</strong></p> <table><thead><tr><th>连接符</th> <th>说明</th></tr></thead> <tbody><tr><td>-</td> <td>算术减法</td></tr> <tr><td>!=</td> <td>关系不等于</td></tr> <tr><td>%</td> <td>算术模量</td></tr> <tr><td>&amp;</td> <td>逻辑与</td></tr> <tr><td>*</td> <td>算术乘法</td></tr> <tr><td>/</td> <td>算术除法</td></tr> <tr><td>|</td> <td>逻辑或</td></tr> <tr><td>||</td> <td>字符串串联</td></tr> <tr><td>+</td> <td>算术加法</td></tr> <tr><td>&lt;</td> <td>关系小于</td></tr> <tr><td>&lt;&lt;</td> <td>按位右移</td></tr> <tr><td>&lt;=</td> <td>关系式小于或等于</td></tr> <tr><td>&lt;&gt;</td> <td>关系不等于</td></tr> <tr><td>=</td> <td>关系等于</td></tr> <tr><td>==</td> <td>关系等于</td></tr> <tr><td>&gt;</td> <td>关系大于</td></tr> <tr><td>&gt;=</td> <td>关系大于或等于</td></tr> <tr><td>&gt;&gt;</td> <td>按位左移</td></tr> <tr><td>AND</td> <td>逻辑与</td></tr> <tr><td>GLOB</td> <td>关系文件名匹配</td></tr> <tr><td>IN</td> <td>逻辑输入</td></tr> <tr><td>LIKE</td> <td>关系字符串匹配</td></tr> <tr><td>OR</td> <td>逻辑或</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bajins/notes-vuepress/edit/master//DBS/关系型数据库.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025-01-21 05:22:46</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/DBS/关系型SQL标准.html" class="prev">
        关系型SQL标准
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e561382c.js" defer></script><script src="/assets/js/2.fae7dd45.js" defer></script><script src="/assets/js/1.53c75ce4.js" defer></script><script src="/assets/js/33.b1edee9e.js" defer></script>
  </body>
</html>
